<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLFIO: LLFIO</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LLFIO<span id="projectnumber">&#160;v2.00</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">LLFIO </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__readme"></a> </p><center><table border="0" cellpadding="4">
<tr>
<td align="center"><a href="https://github.com/ned14/llfio">LLFIO</a><br  />
<a href="https://github.com/ned14/llfio">on GitHub</a>  </td><td align="center"><a href="https://ned14.github.io/llfio/">API</a><br  />
<a href="https://ned14.github.io/llfio/">Documentation</a>  </td><td align="center"><a href="https://my.cdash.org/index.php?project=Boost.AFIO">CTest summary</a><br  />
<a href="https://my.cdash.org/index.php?project=Boost.AFIO">dashboard</a>  </td><td align="center"><a href="https://github.com/ned14/llfio/actions?query=workflow%3A%22Unit+tests+Linux%22"><img src="https://github.com/ned14/llfio/workflows/Unit%20tests%20Linux/badge.svg?branch=master" alt="" style="pointer-events: none;" class="inline"/></a>  </td><td align="center"><a href="https://github.com/ned14/llfio/actions?query=workflow%3A%22Unit+tests+Mac+OS%22"><img src="https://github.com/ned14/llfio/workflows/Unit%20tests%20Mac%20OS/badge.svg?branch=master" alt="" style="pointer-events: none;" class="inline"/></a>  </td><td align="center"><a href="https://github.com/ned14/llfio/actions?query=workflow%3A%22Unit+tests+Windows%22"><img src="https://github.com/ned14/llfio/workflows/Unit%20tests%20Windows/badge.svg?branch=master" alt="" style="pointer-events: none;" class="inline"/></a>  </td><td align="center"><a href="https://github.com/ned14/llfio/releases">Prebuilt</a><br  />
<a href="https://github.com/ned14/llfio/releases">binaries</a>   </td></tr>
</table>
</center><p>Herein lies my proposed zero whole machine memory copy file i/o and filesystem library for the C++ standard, intended for storage devices with ~1 microsecond 4Kb transfer latencies and those supporting Storage Class Memory (SCM)/Direct Access Storage (DAX). Its i/o overhead, including syscall overhead, has been benchmarked to 100 nanoseconds on Linux which corresponds to a theoretical maximum of 10M IOPS @ QD1, approx 40Gb/sec per thread. It has particularly strong support for writing portable filesystem algorithms which work well with directly mapped non-volatile storage such as Intel Optane.</p>
<p>It is a complete rewrite after a Boost peer review in August 2015. LLFIO is the reference implementation for these C++ standardisations:</p><ul>
<li><code>llfio::path_view</code> is expected to enter the C++ 29 standard (<a href="https://wg21.link/p1030">P1030</a>).</li>
</ul>
<p>Other characteristics:</p><ul>
<li>Portable to any conforming C++ 17 compiler with a working Filesystem in its STL.</li>
<li>Works with C++ exceptions and RTTI globally disabled.</li>
<li>Fully clean with C++ 20.<ul>
<li>Will make use of any Coroutines, Concepts, Span, Byte etc if you have them, otherwise swaps in C++ 17 compatible alternatives.</li>
</ul>
</li>
<li>Aims to support Microsoft Windows, Linux, Android, iOS, Mac OS and FreeBSD.<ul>
<li>Best effort to support older kernels up to their EOL (as of July 2020: &gt;= Windows 8.1, &gt;= Linux 2.6.32 (RHEL EOL), &gt;= Mac OS 10.13, &gt;= FreeBSD 11).</li>
</ul>
</li>
<li>Original error code is always preserved, even down to the original NT kernel error code if a NT kernel API was used.<ul>
<li>Optional configuration based on <a href="https://wg21.link/P1028">P1028</a> <em>SG14 status_code and standard error object for P0709 Zero-overhead deterministic exceptions</em>.</li>
</ul>
</li>
<li>Race free filesystem design used throughout (i.e. no TOCTOU).</li>
<li>Zero malloc, zero exception throw and zero whole system memory copy design used throughout, even down to paths (which can hit 64Kb!).</li>
<li>Comprehensive support for virtual and mapped memory of both SCM/DAX and page cached storage, including large, huge and super pages.</li>
<li>Happy on the cloud, well tested with AWS Lustre distributed network filing system.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>Most of this code is mature quality. It has been shipping in production with multiple vendors for some years now, indeed amongst many big data solutions it powers the low level custom database component of the US Security and Exchange Commission's MIDAS solution which ingresses Terabytes of trade data per day. It is considered quite reliable on Windows and Linux (less well tested on Mac OS).</dd></dl>
<p>Examples of use (more examples: <a href="https://github.com/ned14/llfio/tree/develop/example">https://github.com/ned14/llfio/tree/develop/example</a>): </p><table width="100%" border="0" cellpadding="4">
<tr>
<td width="50%" valign="top"><p class="starttd">Memory map in a file for read: </p><div class="fragment"><div class="line">  <span class="keyword">namespace </span><a class="code hl_namespace" href="namespacellfio__v2__xxx.html">llfio</a> = <a class="code hl_define" href="group__config.html#gac9f7f0153adb9034d26c4554728f817a">LLFIO_V2_NAMESPACE</a>;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Open the mapped file for read</span></div>
<div class="line">  <a class="code hl_class" href="classllfio__v2__xxx_1_1mapped__file__handle.html">llfio::mapped_file_handle</a> mh = <a class="code hl_function" href="namespacellfio__v2__xxx.html#acd47ba65e6169a21f7a9d0250be24709">llfio::mapped_file</a>(  <span class="comment">//</span></div>
<div class="line">    {},       <span class="comment">// path_handle to base directory</span></div>
<div class="line">    <span class="stringliteral">&quot;foo&quot;</span>     <span class="comment">// path_view to path fragment relative to base directory</span></div>
<div class="line">              <span class="comment">// default mode is read only</span></div>
<div class="line">              <span class="comment">// default creation is open existing</span></div>
<div class="line">              <span class="comment">// default caching is all</span></div>
<div class="line">              <span class="comment">// default flags is none</span></div>
<div class="line">  ).value();  <span class="comment">// If failed, throw a filesystem_error exception</span></div>
<div class="line"> </div>
<div class="line">  <span class="keyword">auto</span> length = mh.<a class="code hl_function" href="classllfio__v2__xxx_1_1mapped__file__handle.html#a145c9f5d6d48986080bd41410c498dda">maximum_extent</a>().value();</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Find my text</span></div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">char</span> *p = <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span> *<span class="keyword">&gt;</span>(mh.<a class="code hl_function" href="classllfio__v2__xxx_1_1mapped__file__handle.html#a65cf41051d5cac8479e842f48b523b92">address</a>()); (p = (<span class="keywordtype">char</span> *)memchr(p, <span class="charliteral">&#39;h&#39;</span>, <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span> *<span class="keyword">&gt;</span>(mh.<a class="code hl_function" href="classllfio__v2__xxx_1_1mapped__file__handle.html#a65cf41051d5cac8479e842f48b523b92">address</a>()) + length - p)); p++)</div>
<div class="line">  {</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(p, <span class="stringliteral">&quot;hello&quot;</span>))</div>
<div class="line">    {</div>
<div class="line">      std::cout &lt;&lt; <span class="stringliteral">&quot;Happy days!&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="ttc" id="aclassllfio__v2__xxx_1_1mapped__file__handle_html"><div class="ttname"><a href="classllfio__v2__xxx_1_1mapped__file__handle.html">llfio_v2_xxx::mapped_file_handle</a></div><div class="ttdoc">A memory mapped regular file or device.</div><div class="ttdef"><b>Definition</b> mapped_file_handle.hpp:170</div></div>
<div class="ttc" id="aclassllfio__v2__xxx_1_1mapped__file__handle_html_a145c9f5d6d48986080bd41410c498dda"><div class="ttname"><a href="classllfio__v2__xxx_1_1mapped__file__handle.html#a145c9f5d6d48986080bd41410c498dda">llfio_v2_xxx::mapped_file_handle::maximum_extent</a></div><div class="ttdeci">virtual result&lt; extent_type &gt; maximum_extent() const noexcept override</div><div class="ttdoc">Return the current maximum permitted extent of the file, after updating the map.</div><div class="ttdef"><b>Definition</b> mapped_file_handle.hpp:648</div></div>
<div class="ttc" id="aclassllfio__v2__xxx_1_1mapped__file__handle_html_a65cf41051d5cac8479e842f48b523b92"><div class="ttname"><a href="classllfio__v2__xxx_1_1mapped__file__handle.html#a65cf41051d5cac8479e842f48b523b92">llfio_v2_xxx::mapped_file_handle::address</a></div><div class="ttdeci">byte * address() const noexcept</div><div class="ttdoc">The address in memory where this mapped file currently resides.</div><div class="ttdef"><b>Definition</b> mapped_file_handle.hpp:561</div></div>
<div class="ttc" id="agroup__config_html_gac9f7f0153adb9034d26c4554728f817a"><div class="ttname"><a href="group__config.html#gac9f7f0153adb9034d26c4554728f817a">LLFIO_V2_NAMESPACE</a></div><div class="ttdeci">#define LLFIO_V2_NAMESPACE</div><div class="ttdoc">The namespace of this LLFIO v2 which will be some unknown inline namespace starting with v2_ inside t...</div><div class="ttdef"><b>Definition</b> config.hpp:183</div></div>
<div class="ttc" id="anamespacellfio__v2__xxx_html"><div class="ttname"><a href="namespacellfio__v2__xxx.html">llfio_v2_xxx</a></div><div class="ttdoc">The LLFIO namespace.</div><div class="ttdef"><b>Definition</b> byte_io_handle.hpp:37</div></div>
<div class="ttc" id="anamespacellfio__v2__xxx_html_acd47ba65e6169a21f7a9d0250be24709"><div class="ttname"><a href="namespacellfio__v2__xxx.html#acd47ba65e6169a21f7a9d0250be24709">llfio_v2_xxx::mapped_file</a></div><div class="ttdeci">result&lt; mapped_file_handle &gt; mapped_file(mapped_file_handle::size_type reservation, const path_handle &amp;base, mapped_file_handle::path_view_type _path, mapped_file_handle::mode _mode=mapped_file_handle::mode::read, mapped_file_handle::creation _creation=mapped_file_handle::creation::open_existing, mapped_file_handle::caching _caching=mapped_file_handle::caching::all, mapped_file_handle::flag flags=mapped_file_handle::flag::none) noexcept</div><div class="ttdef"><b>Definition</b> mapped_file_handle.hpp:817</div></div>
</div><!-- fragment --><p class="endtd">Sparsely stored temporary disposable array: </p><div class="fragment"><div class="line">  <span class="keyword">namespace </span><a class="code hl_namespace" href="namespacellfio__v2__xxx.html">llfio</a> = <a class="code hl_define" href="group__config.html#gac9f7f0153adb9034d26c4554728f817a">LLFIO_V2_NAMESPACE</a>;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Make me a 1 trillion element sparsely allocated integer array!</span></div>
<div class="line">  <a class="code hl_class" href="classllfio__v2__xxx_1_1mapped__file__handle.html">llfio::mapped_file_handle</a> mfh = <a class="code hl_function" href="namespacellfio__v2__xxx.html#a39c151f58d38aff138662d7459c6985b">llfio::mapped_temp_inode</a>().value();</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// On an extents based filing system, doesn&#39;t actually allocate any physical</span></div>
<div class="line">  <span class="comment">// storage but does map approximately 4Tb of all bits zero data into memory</span></div>
<div class="line">  (void) mfh.<a class="code hl_function" href="classllfio__v2__xxx_1_1mapped__file__handle.html#a04458028876437de93560d7689c8f91c">truncate</a>(1000000000000ULL * <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Create a typed view of the one trillion integers</span></div>
<div class="line">  llfio::attached&lt;int&gt; one_trillion_int_array(mfh);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Write and read as you see fit, if you exceed physical RAM it&#39;ll be paged out</span></div>
<div class="line">  one_trillion_int_array[0] = 5;</div>
<div class="line">  one_trillion_int_array[999999999999ULL] = 6;</div>
<div class="ttc" id="aclassllfio__v2__xxx_1_1mapped__file__handle_html_a04458028876437de93560d7689c8f91c"><div class="ttname"><a href="classllfio__v2__xxx_1_1mapped__file__handle.html#a04458028876437de93560d7689c8f91c">llfio_v2_xxx::mapped_file_handle::truncate</a></div><div class="ttdeci">virtual result&lt; extent_type &gt; truncate(extent_type newsize) noexcept override</div><div class="ttdoc">Resize the current maximum permitted extent of the mapped file to the given extent,...</div></div>
<div class="ttc" id="anamespacellfio__v2__xxx_html_a39c151f58d38aff138662d7459c6985b"><div class="ttname"><a href="namespacellfio__v2__xxx.html#a39c151f58d38aff138662d7459c6985b">llfio_v2_xxx::mapped_temp_inode</a></div><div class="ttdeci">result&lt; mapped_file_handle &gt; mapped_temp_inode(mapped_file_handle::size_type reservation=0, const path_handle &amp;dir=path_discovery::storage_backed_temporary_files_directory(), mapped_file_handle::mode _mode=mapped_file_handle::mode::write, mapped_file_handle::caching _caching=mapped_file_handle::caching::temporary, mapped_file_handle::flag flags=mapped_file_handle::flag::none) noexcept</div><div class="ttdef"><b>Definition</b> mapped_file_handle.hpp:892</div></div>
</div><!-- fragment -->  </td><td width="50%" valign="top">Read metadata about a file and its storage: <div class="fragment"><div class="line">  <span class="keyword">namespace </span><a class="code hl_namespace" href="namespacellfio__v2__xxx.html">llfio</a> = <a class="code hl_define" href="group__config.html#gac9f7f0153adb9034d26c4554728f817a">LLFIO_V2_NAMESPACE</a>;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Open the file for read</span></div>
<div class="line">  <a class="code hl_class" href="classllfio__v2__xxx_1_1file__handle.html">llfio::file_handle</a> fh = <a class="code hl_function" href="namespacellfio__v2__xxx.html#af79ace4d372483388884293e9d4fcf82">llfio::file</a>(  <span class="comment">//</span></div>
<div class="line">    {},       <span class="comment">// path_handle to base directory</span></div>
<div class="line">    <span class="stringliteral">&quot;foo&quot;</span>     <span class="comment">// path_view to path fragment relative to base directory</span></div>
<div class="line">              <span class="comment">// default mode is read only</span></div>
<div class="line">              <span class="comment">// default creation is open existing</span></div>
<div class="line">              <span class="comment">// default caching is all</span></div>
<div class="line">              <span class="comment">// default flags is none</span></div>
<div class="line">  ).value();  <span class="comment">// If failed, throw a filesystem_error exception</span></div>
<div class="line"> </div>
<div class="line">  <span class="comment">// warning: default constructor does nothing. If you want all bits</span></div>
<div class="line">  <span class="comment">// zero, construct with `nullptr`.</span></div>
<div class="line">  <a class="code hl_struct" href="structllfio__v2__xxx_1_1stat__t.html">llfio::stat_t</a> fhstat;</div>
<div class="line">  fhstat.<a class="code hl_function" href="structllfio__v2__xxx_1_1stat__t.html#a2d2541bd46bf79f6636618b323d62653">fill</a>(</div>
<div class="line">    fh        <span class="comment">// file handle from which to fill stat_t</span></div>
<div class="line">              <span class="comment">// default stat_t::want is all</span></div>
<div class="line">  ).value();</div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;The file was last modified on &quot;</span></div>
<div class="line">            &lt;&lt; print(fhstat.<a class="code hl_variable" href="structllfio__v2__xxx_1_1stat__t.html#aefe8c88dad824c911fa7bf6e1baef1c4">st_mtim</a>) &lt;&lt; std::endl;</div>
<div class="line">  </div>
<div class="line">  <span class="comment">// Note that default constructor fills with all bits one. This</span></div>
<div class="line">  <span class="comment">// lets you do partial fills and usually detect what wasn&#39;t filled.</span></div>
<div class="line">  <a class="code hl_struct" href="structllfio__v2__xxx_1_1statfs__t.html">llfio::statfs_t</a> fhfsstat;</div>
<div class="line">  fhfsstat.<a class="code hl_function" href="structllfio__v2__xxx_1_1statfs__t.html#a65e94aead010f010b9745911867a37dd">fill</a>(</div>
<div class="line">    fh        <span class="comment">// file handle from which to fill statfs_t</span></div>
<div class="line">              <span class="comment">// default statfs_t::want is all</span></div>
<div class="line">  ).value();</div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;The file&#39;s storage has &quot;</span></div>
<div class="line">            &lt;&lt; (fhfsstat.<a class="code hl_variable" href="structllfio__v2__xxx_1_1statfs__t.html#aa4a4f434ba56992244ac59c8f825a962">f_bavail</a> * fhfsstat.<a class="code hl_variable" href="structllfio__v2__xxx_1_1statfs__t.html#aa24a1f36d9addae9d0d6ab13eeb43e5d">f_bsize</a>)</div>
<div class="line">            &lt;&lt; <span class="stringliteral">&quot;bytes free.&quot;</span> &lt;&lt; std::endl;</div>
<div class="ttc" id="aclassllfio__v2__xxx_1_1file__handle_html"><div class="ttname"><a href="classllfio__v2__xxx_1_1file__handle.html">llfio_v2_xxx::file_handle</a></div><div class="ttdoc">A handle to a regular file or device.</div><div class="ttdef"><b>Definition</b> file_handle.hpp:53</div></div>
<div class="ttc" id="anamespacellfio__v2__xxx_html_af79ace4d372483388884293e9d4fcf82"><div class="ttname"><a href="namespacellfio__v2__xxx.html#af79ace4d372483388884293e9d4fcf82">llfio_v2_xxx::file</a></div><div class="ttdeci">result&lt; file_handle &gt; file(const path_handle &amp;base, file_handle::path_view_type path, file_handle::mode _mode=file_handle::mode::read, file_handle::creation _creation=file_handle::creation::open_existing, file_handle::caching _caching=file_handle::caching::all, file_handle::flag flags=file_handle::flag::none) noexcept</div><div class="ttdef"><b>Definition</b> file_handle.hpp:434</div></div>
<div class="ttc" id="astructllfio__v2__xxx_1_1stat__t_html"><div class="ttname"><a href="structllfio__v2__xxx_1_1stat__t.html">llfio_v2_xxx::stat_t</a></div><div class="ttdoc">Metadata about a directory entry.</div><div class="ttdef"><b>Definition</b> stat.hpp:66</div></div>
<div class="ttc" id="astructllfio__v2__xxx_1_1stat__t_html_a2d2541bd46bf79f6636618b323d62653"><div class="ttname"><a href="structllfio__v2__xxx_1_1stat__t.html#a2d2541bd46bf79f6636618b323d62653">llfio_v2_xxx::stat_t::fill</a></div><div class="ttdeci">result&lt; size_t &gt; fill(const handle &amp;h, want wanted=want::all) noexcept</div></div>
<div class="ttc" id="astructllfio__v2__xxx_1_1stat__t_html_aefe8c88dad824c911fa7bf6e1baef1c4"><div class="ttname"><a href="structllfio__v2__xxx_1_1stat__t.html#aefe8c88dad824c911fa7bf6e1baef1c4">llfio_v2_xxx::stat_t::st_mtim</a></div><div class="ttdeci">std::chrono::system_clock::time_point st_mtim</div><div class="ttdef"><b>Definition</b> stat.hpp:94</div></div>
<div class="ttc" id="astructllfio__v2__xxx_1_1statfs__t_html"><div class="ttname"><a href="structllfio__v2__xxx_1_1statfs__t.html">llfio_v2_xxx::statfs_t</a></div><div class="ttdoc">Metadata about a filing system. Unsupported entries are all bits set.</div><div class="ttdef"><b>Definition</b> statfs.hpp:74</div></div>
<div class="ttc" id="astructllfio__v2__xxx_1_1statfs__t_html_a65e94aead010f010b9745911867a37dd"><div class="ttname"><a href="structllfio__v2__xxx_1_1statfs__t.html#a65e94aead010f010b9745911867a37dd">llfio_v2_xxx::statfs_t::fill</a></div><div class="ttdeci">result&lt; size_t &gt; fill(const handle &amp;h, want wanted=want::all) noexcept</div><div class="ttdoc">Fills in the structure with metadata, returning number of items filled in.</div></div>
<div class="ttc" id="astructllfio__v2__xxx_1_1statfs__t_html_aa24a1f36d9addae9d0d6ab13eeb43e5d"><div class="ttname"><a href="structllfio__v2__xxx_1_1statfs__t.html#aa24a1f36d9addae9d0d6ab13eeb43e5d">llfio_v2_xxx::statfs_t::f_bsize</a></div><div class="ttdeci">uint64_t f_bsize</div><div class="ttdef"><b>Definition</b> statfs.hpp:90</div></div>
<div class="ttc" id="astructllfio__v2__xxx_1_1statfs__t_html_aa4a4f434ba56992244ac59c8f825a962"><div class="ttname"><a href="structllfio__v2__xxx_1_1statfs__t.html#aa4a4f434ba56992244ac59c8f825a962">llfio_v2_xxx::statfs_t::f_bavail</a></div><div class="ttdeci">uint64_t f_bavail</div><div class="ttdef"><b>Definition</b> statfs.hpp:94</div></div>
</div><!-- fragment -->   </td></tr>
</table>
<p>See <a href="https://github.com/ned14/llfio/blob/master/programs/fs-probe/fs_probe_results.yaml">https://github.com/ned14/llfio/blob/master/programs/fs-probe/fs_probe_results.yaml</a> for a database of latencies for various previously tested OS, filing systems and storage devices.</p>
<p>Todo list for already implemented parts: <a href="https://ned14.github.io/llfio/todo.html">https://ned14.github.io/llfio/todo.html</a></p>
<p>&#160;</p>
<center><span style="font-size: large; text-decoration: underline;"><a class="el" href="md__build.html">Build instructions can found here</a></span></center> <p>&#160;</p>
<h2><a class="anchor" id="autotoc_md21"></a>
v2 architecture and design implemented:</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">NEW in v2   </th><th class="markdownTableHeadNone">Boost peer review feedback   </th><th class="markdownTableHeadNone"></th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">Universal native handle/fd abstraction instead of <code>void *</code>.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">Perfectly/Ideally low memory (de)allocation per op (usually none).    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">noexcept API throughout returning error_code for failure instead of throwing exceptions.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">LLFIO v1 handle type split into hierarchy of types:<ol>
<li>
handle - provides open, close, get path, clone, set/unset append only, change caching, characteristics</li>
<li>
fs_handle - handles with an inode number</li>
<li>
path_handle - a race free anchor to a subset of the filesystem</li>
<li>
directory_handle - enumerates the filesystem</li>
<li>
io_handle - adds synchronous scatter-gather i/o, byte range locking</li>
<li>
file_handle - adds open/create file, get and set maximum extent</li>
<li>
mapped_file_handle - adds low latency memory mapped scatter-gather i/o</li>
</ol>
</td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">Cancelable i/o (made possible thanks to dropping XP support).    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">All shared_ptr usage removed as all use of multiple threads removed.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">Use of std::vector to transport scatter-gather sequences replaced with C++ 20 <code>span&lt;&gt;</code> borrowed views.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">Completion callbacks are now some arbitrary type <code>U&amp;&amp;</code> instead of a future continuation. Type erasure for its storage is bound into the one single memory allocation for everything needed to execute the op, and so therefore overhead is optimal.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">Filing system algorithms made generic and broken out into public <code>llfio::algorithms</code> template library (the LLFIO FTL).    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">Abstraction of native handle management via bitfield specified "characteristics".    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Storage profiles, a YAML database of behaviours of hardware, OS and filing system combinations.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Absolute and interval deadline timed i/o throughout (made possible thanks to dropping XP support).    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Dependency on ASIO/Networking TS removed completely.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Four choices of algorithm implementing a shared filing system mutex.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Uses CMake, CTest, CDash and CPack with automatic usage of C++ Modules or precompiled headers where available.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Far more comprehensive memory map and virtual memory facilities.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Much more granular, micro level unit testing of individual functions.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Much more granular, micro level internal logging of every code path taken.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Path views used throughout, thus avoiding string copying and allocation in <code>std::filesystem::path</code>.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Paths are equally interpreted as UTF-8 on all platforms.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">We never store nor retain a path, as they are inherently racy and are best avoided.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">Parent handle caching is hard coded in, it is now an optional user applied templated adapter class.   </td></tr>
</table>
<p>Todo:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">NEW in v2   </th><th class="markdownTableHeadNone">Boost peer review feedback   </th><th class="markdownTableHeadNone"></th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">clang AST assisted SWIG bindings for other languages.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Statistical tracking of operation latencies so realtime IOPS can be measured.   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md22"></a>
Planned features implemented:</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">NEW in v2   </th><th class="markdownTableHeadNone">Windows   </th><th class="markdownTableHeadNone">POSIX   </th><th class="markdownTableHeadNone"></th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">Native handle cloning.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">✔ (up from four)   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">Maximum possible (seven) forms of kernel caching.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">Absolute path open.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">Relative "anchored" path open enabling race free file system.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Win32 path support (260 path limit).    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">NT kernel path support (32,768 path limit).    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">Synchronous universal scatter-gather i/o.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">✔ (POSIX AIO support)   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">Asynchronous universal scatter-gather i/o.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">i/o deadlines and cancellation.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">Retrieving and setting the current maximum extent (size) of an open file.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">Retrieving the current path of an open file irrespective of where it has been renamed to by third parties.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">statfs_t ported over from LLFIO v1.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">utils namespace ported over from LLFIO v1.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone"><code>shared_fs_mutex</code> shared/exclusive entities locking based on lock files    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">Byte range shared/exclusive locking.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone"><code>shared_fs_mutex</code> shared/exclusive entities locking based on byte ranges    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone"><code>shared_fs_mutex</code> shared/exclusive entities locking based on atomic append    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">Memory mapped files and virtual memory management (<code>section_handle</code>, <code>map_handle</code> and <code>mapped_file_handle</code>)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone"><code>shared_fs_mutex</code> shared/exclusive entities locking based on memory maps    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">Universal portable UTF-8 path views.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">"Hole punching" and hole enumeration ported over from LLFIO v1.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">Directory handles and very fast directory enumeration ported over from LLFIO v1.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone"><code>shared_fs_mutex</code> shared/exclusive entities locking based on safe byte ranges    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">Set random or sequential i/o (prefetch).    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone"><code>llfio::algorithm::trivial_vector&lt;T&gt;</code> with constant time reallocation if <code>T</code> is trivially copyable.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone"><code>symlink_handle</code>.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">Large, huge and massive page size support for memory allocation and (POSIX only) file maps.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">A mechanism for writing a <code>stat_t</code> onto an inode.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">Graph based directory hierarchy traveral algorithm.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">Graph based directory hierarchy summary algorithm.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">Graph based reliable directory hierarchy deletion algorithm.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone">Intelligent file contents cloning between file handles.   </td></tr>
</table>
<p>Todo thereafter in order of priority:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">NEW in v2   </th><th class="markdownTableHeadNone">Windows   </th><th class="markdownTableHeadNone">POSIX   </th><th class="markdownTableHeadNone"></th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Page allocator based on an index of linked list of free pages. See notes.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Optionally concurrent B+ tree index based on page allocator for key-value store.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Attributes extending <code>span&lt;buffers_type&gt;</code> with DMA colouring.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Coroutine generator for iterating a file's contents in DMA friendly way.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Ranges &amp; Concurrency based reliable directory hierarchy copy algorithm.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Ranges &amp; Concurrency based reliable directory hierarchy update (two and three way) algorithm.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Linux io_uring support for native non-blocking <code>O_DIRECT</code> i/o    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><code>std::pmr::memory_resource</code> adapting a file backing if on C++ 17.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Extended attributes support.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Algorithm to replace all duplicate content with hard links.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Algorithm to figure out all paths for a hard linked inode.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">✔   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Algorithm to compare two or three directory enumerations and give differences.   </td></tr>
</table>
<p>Features possibly to be added after a Boost peer review:</p><ul>
<li>Directory change monitoring.</li>
<li>Permissions support (ACLs).</li>
</ul>
<table width="100%" border="0" cellpadding="4">
<tr>
<th colspan="3">Why you might need LLFIO<hr  />
  </th></tr>
<tr>
<td valign="top" width="33%">Manufacturer claimed 4Kb transfer latencies for the physical hardware:<ul>
<li>Spinning rust hard drive latency @ QD1: <b>9000us</b></li>
<li>SATA flash drive latency @ QD1: <b>800us</b></li>
<li>NVMe flash drive latency @ QD1: <b>300us</b></li>
<li>RTT UDP packet latency over a LAN: <b>60us</b></li>
<li>NVMe Optane drive latency @ QD1: <b>60us</b></li>
<li><code>memcpy(4Kb)</code> latency: <b>5us</b> (main memory) to <b>1.3us</b> (L3 cache)</li>
<li>RTT PCIe latency: <b>0.5us</b>  </li>
</ul>
</td><td valign="top" width="33%">100% read QD1 4Kb direct transfer latencies for the software with LLFIO:<ul>
<li>&lt; 99% spinning rust hard drive latency: Windows <b>187,231us</b> FreeBSD <b>9,836us</b> Linux <b>26,468us</b></li>
<li>&lt; 99% SATA flash drive latency: Windows <b>290us</b> Linux <b>158us</b></li>
<li>&lt; 99% NVMe drive latency: Windows <b>37us</b> FreeBSD <b>70us</b> Linux <b>30us</b>  </li>
</ul>
</td><td valign="top" width="33%">75% read 25% write QD4 4Kb direct transfer latencies for the software with LLFIO:<ul>
<li>&lt; 99% spinning rust hard drive latency: Windows <b>48,185us</b> FreeBSD <b>61,834us</b> Linux <b>104,507us</b></li>
<li>&lt; 99% SATA flash drive latency: Windows <b>1,812us</b> Linux <b>1,416us</b></li>
<li>&lt; 99% NVMe drive latency: Windows <b>50us</b> FreeBSD <b>143us</b> Linux <b>40us</b>   </li>
</ul>
</td></tr>
</table>
<p>Max bandwidth for the physical hardware:</p><ul>
<li>DDR4 2133: <b>30Gb/sec</b> (main memory)</li>
<li>x4 PCIe 4.0: <b>7.5Gb/sec</b> (arrives end of 2017, the 2018 NVMe drives will use PCIe 4.0)</li>
<li>x4 PCIe 3.0: <b>3.75Gb/sec</b> (985Mb/sec per PCIe lane)</li>
<li>2017 XPoint drive (x4 PCIe 3.0): <b>2.5Gb/sec</b></li>
<li>2017 NVMe flash drive (x4 PCIe 3.0): <b>2Gb/sec</b></li>
<li>10Gbit LAN: <b>1.2Gb/sec</b> </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
