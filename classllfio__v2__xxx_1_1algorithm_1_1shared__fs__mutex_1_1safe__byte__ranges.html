<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLFIO: llfio_v2_xxx::algorithm::shared_fs_mutex::safe_byte_ranges Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LLFIO<span id="projectnumber">&#160;v2.00</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1safe__byte__ranges.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1safe__byte__ranges-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">llfio_v2_xxx::algorithm::shared_fs_mutex::safe_byte_ranges Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Safe many entity shared/exclusive file system based lock.  
 <a href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1safe__byte__ranges.html#details">More...</a></p>

<p><code>#include &quot;safe_byte_ranges.hpp&quot;</code></p>
<div class="dynheader">
Inheritance diagram for llfio_v2_xxx::algorithm::shared_fs_mutex::safe_byte_ranges:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1safe__byte__ranges.png" usemap="#llfio_5Fv2_5Fxxx::algorithm::shared_5Ffs_5Fmutex::safe_5Fbyte_5Franges_map" alt=""/>
  <map id="llfio_5Fv2_5Fxxx::algorithm::shared_5Ffs_5Fmutex::safe_5Fbyte_5Franges_map" name="llfio_5Fv2_5Fxxx::algorithm::shared_5Ffs_5Fmutex::safe_5Fbyte_5Franges_map">
<area href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1shared__fs__mutex.html" title="Abstract base class for an object which protects shared filing system resources." alt="llfio_v2_xxx::algorithm::shared_fs_mutex::shared_fs_mutex" shape="rect" coords="0,0,343,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:aa0050984d2b49b3679d429d57b021f46" id="r_aa0050984d2b49b3679d429d57b021f46"><td class="memItemLeft" align="right" valign="top"><a id="aa0050984d2b49b3679d429d57b021f46" name="aa0050984d2b49b3679d429d57b021f46"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>entity_type</b> = <a class="el" href="structllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1shared__fs__mutex_1_1entity__type.html">shared_fs_mutex::entity_type</a></td></tr>
<tr class="memdesc:aa0050984d2b49b3679d429d57b021f46"><td class="mdescLeft">&#160;</td><td class="mdescRight">The type of an entity id. <br /></td></tr>
<tr class="separator:aa0050984d2b49b3679d429d57b021f46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a38be63dffa241d502f2a28ceb048ea" id="r_a3a38be63dffa241d502f2a28ceb048ea"><td class="memItemLeft" align="right" valign="top"><a id="a3a38be63dffa241d502f2a28ceb048ea" name="a3a38be63dffa241d502f2a28ceb048ea"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>entities_type</b> = <a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1shared__fs__mutex.html#aec91125605e5a8379b7616b7f90d1232">shared_fs_mutex::entities_type</a></td></tr>
<tr class="memdesc:a3a38be63dffa241d502f2a28ceb048ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">The type of a sequence of entities. <br /></td></tr>
<tr class="separator:a3a38be63dffa241d502f2a28ceb048ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a0bc85104e524c7a97e6934b605788b6b" id="r_a0bc85104e524c7a97e6934b605788b6b"><td class="memItemLeft" align="right" valign="top"><a id="a0bc85104e524c7a97e6934b605788b6b" name="a0bc85104e524c7a97e6934b605788b6b"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>safe_byte_ranges</b> (const <a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1safe__byte__ranges.html">safe_byte_ranges</a> &amp;)=delete</td></tr>
<tr class="memdesc:a0bc85104e524c7a97e6934b605788b6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">No copy construction. <br /></td></tr>
<tr class="separator:a0bc85104e524c7a97e6934b605788b6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab09a83961b3e5c81e8a8a76aa5ef283a" id="r_ab09a83961b3e5c81e8a8a76aa5ef283a"><td class="memItemLeft" align="right" valign="top"><a id="ab09a83961b3e5c81e8a8a76aa5ef283a" name="ab09a83961b3e5c81e8a8a76aa5ef283a"></a>
<a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1safe__byte__ranges.html">safe_byte_ranges</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1safe__byte__ranges.html">safe_byte_ranges</a> &amp;)=delete</td></tr>
<tr class="memdesc:ab09a83961b3e5c81e8a8a76aa5ef283a"><td class="mdescLeft">&#160;</td><td class="mdescRight">No copy assignment. <br /></td></tr>
<tr class="separator:ab09a83961b3e5c81e8a8a76aa5ef283a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ddf148d1bf4ea4e8d8abeff6ec5660f" id="r_a3ddf148d1bf4ea4e8d8abeff6ec5660f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1safe__byte__ranges.html#a3ddf148d1bf4ea4e8d8abeff6ec5660f">safe_byte_ranges</a> (<a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1safe__byte__ranges.html">safe_byte_ranges</a> &amp;&amp;o) noexcept</td></tr>
<tr class="memdesc:a3ddf148d1bf4ea4e8d8abeff6ec5660f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move constructor.  <br /></td></tr>
<tr class="separator:a3ddf148d1bf4ea4e8d8abeff6ec5660f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a581bfb3ba7cbd80ad7d50e2faa812d24" id="r_a581bfb3ba7cbd80ad7d50e2faa812d24"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1safe__byte__ranges.html">safe_byte_ranges</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1safe__byte__ranges.html#a581bfb3ba7cbd80ad7d50e2faa812d24">operator=</a> (<a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1safe__byte__ranges.html">safe_byte_ranges</a> &amp;&amp;o) noexcept</td></tr>
<tr class="memdesc:a581bfb3ba7cbd80ad7d50e2faa812d24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move assign.  <br /></td></tr>
<tr class="separator:a581bfb3ba7cbd80ad7d50e2faa812d24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa22cd8a543e88b3af6915444828f31e2" id="r_aa22cd8a543e88b3af6915444828f31e2"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1safe__byte__ranges.html#aa22cd8a543e88b3af6915444828f31e2">unlock</a> (<a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1safe__byte__ranges.html#a3a38be63dffa241d502f2a28ceb048ea">entities_type</a> entities, unsigned long long hint) noexcept final</td></tr>
<tr class="memdesc:aa22cd8a543e88b3af6915444828f31e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlock a previously locked sequence of entities.  <br /></td></tr>
<tr class="separator:aa22cd8a543e88b3af6915444828f31e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cdf15b69bf6f375ec7083d639f76358" id="r_a4cdf15b69bf6f375ec7083d639f76358"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1safe__byte__ranges.html#aa0050984d2b49b3679d429d57b021f46">entity_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1shared__fs__mutex.html#a4cdf15b69bf6f375ec7083d639f76358">entity_from_buffer</a> (const char *buffer, size_t bytes, bool <a class="el" href="namespacellfio__v2__xxx.html#ae79486289ff1386b26d1ce60bb797d33aa4293995cfbfa9ce60ce71ade2ff75f7">exclusive</a>=true) noexcept</td></tr>
<tr class="memdesc:a4cdf15b69bf6f375ec7083d639f76358"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates an entity id from a sequence of bytes.  <br /></td></tr>
<tr class="separator:a4cdf15b69bf6f375ec7083d639f76358"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb28aedaf5caa53e851165a4f1927207" id="r_afb28aedaf5caa53e851165a4f1927207"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:afb28aedaf5caa53e851165a4f1927207"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1safe__byte__ranges.html#aa0050984d2b49b3679d429d57b021f46">entity_type</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1shared__fs__mutex.html#afb28aedaf5caa53e851165a4f1927207">entity_from_string</a> (const std::basic_string&lt; T &gt; &amp;str, bool <a class="el" href="namespacellfio__v2__xxx.html#ae79486289ff1386b26d1ce60bb797d33aa4293995cfbfa9ce60ce71ade2ff75f7">exclusive</a>=true) noexcept</td></tr>
<tr class="memdesc:afb28aedaf5caa53e851165a4f1927207"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates an entity id from a string.  <br /></td></tr>
<tr class="separator:afb28aedaf5caa53e851165a4f1927207"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d62fe0c18bcfb1ade9ff9c7bb00e70b" id="r_a8d62fe0c18bcfb1ade9ff9c7bb00e70b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1safe__byte__ranges.html#aa0050984d2b49b3679d429d57b021f46">entity_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1shared__fs__mutex.html#a8d62fe0c18bcfb1ade9ff9c7bb00e70b">random_entity</a> (bool <a class="el" href="namespacellfio__v2__xxx.html#ae79486289ff1386b26d1ce60bb797d33aa4293995cfbfa9ce60ce71ade2ff75f7">exclusive</a>=true) noexcept</td></tr>
<tr class="memdesc:a8d62fe0c18bcfb1ade9ff9c7bb00e70b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a cryptographically random entity id.  <br /></td></tr>
<tr class="separator:a8d62fe0c18bcfb1ade9ff9c7bb00e70b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab33ccb32052633a55cb3bb5d1bbdf52b" id="r_ab33ccb32052633a55cb3bb5d1bbdf52b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1shared__fs__mutex.html#ab33ccb32052633a55cb3bb5d1bbdf52b">fill_random_entities</a> (span&lt; <a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1safe__byte__ranges.html#aa0050984d2b49b3679d429d57b021f46">entity_type</a> &gt; seq, bool <a class="el" href="namespacellfio__v2__xxx.html#ae79486289ff1386b26d1ce60bb797d33aa4293995cfbfa9ce60ce71ade2ff75f7">exclusive</a>=true) noexcept</td></tr>
<tr class="memdesc:ab33ccb32052633a55cb3bb5d1bbdf52b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fills a sequence of entity ids with cryptographic randomness. Much faster than calling random_entity() individually.  <br /></td></tr>
<tr class="separator:ab33ccb32052633a55cb3bb5d1bbdf52b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ad0c61b69f363813661dc1971a60dd2" id="r_a8ad0c61b69f363813661dc1971a60dd2"><td class="memItemLeft" align="right" valign="top">result&lt; <a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1shared__fs__mutex_1_1entities__guard.html">entities_guard</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1shared__fs__mutex.html#a8ad0c61b69f363813661dc1971a60dd2">lock</a> (<a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1safe__byte__ranges.html#a3a38be63dffa241d502f2a28ceb048ea">entities_type</a> entities, <a class="el" href="structllfio__v2__xxx_1_1deadline.html">deadline</a> d=<a class="el" href="structllfio__v2__xxx_1_1deadline.html">deadline</a>(), bool spin_not_sleep=false) noexcept</td></tr>
<tr class="memdesc:a8ad0c61b69f363813661dc1971a60dd2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lock all of a sequence of entities for exclusive or shared access.  <br /></td></tr>
<tr class="separator:a8ad0c61b69f363813661dc1971a60dd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0c3cedcbcee27bcba4d161194b45354" id="r_ac0c3cedcbcee27bcba4d161194b45354"><td class="memItemLeft" align="right" valign="top">result&lt; <a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1shared__fs__mutex_1_1entities__guard.html">entities_guard</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1shared__fs__mutex.html#ac0c3cedcbcee27bcba4d161194b45354">lock</a> (<a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1safe__byte__ranges.html#aa0050984d2b49b3679d429d57b021f46">entity_type</a> entity, <a class="el" href="structllfio__v2__xxx_1_1deadline.html">deadline</a> d=<a class="el" href="structllfio__v2__xxx_1_1deadline.html">deadline</a>(), bool spin_not_sleep=false) noexcept</td></tr>
<tr class="memdesc:ac0c3cedcbcee27bcba4d161194b45354"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lock a single entity for exclusive or shared access.  <br /></td></tr>
<tr class="separator:ac0c3cedcbcee27bcba4d161194b45354"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdcd49112d1349c42b6e09aeb7ac2212" id="r_afdcd49112d1349c42b6e09aeb7ac2212"><td class="memItemLeft" align="right" valign="top">result&lt; <a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1shared__fs__mutex_1_1entities__guard.html">entities_guard</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1shared__fs__mutex.html#afdcd49112d1349c42b6e09aeb7ac2212">try_lock</a> (<a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1safe__byte__ranges.html#a3a38be63dffa241d502f2a28ceb048ea">entities_type</a> entities) noexcept</td></tr>
<tr class="memdesc:afdcd49112d1349c42b6e09aeb7ac2212"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to lock all of a sequence of entities for exclusive or shared access.  <br /></td></tr>
<tr class="separator:afdcd49112d1349c42b6e09aeb7ac2212"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac706e034e46da62f3b8cf5de8d5fdd2" id="r_aac706e034e46da62f3b8cf5de8d5fdd2"><td class="memItemLeft" align="right" valign="top">result&lt; <a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1shared__fs__mutex_1_1entities__guard.html">entities_guard</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1shared__fs__mutex.html#aac706e034e46da62f3b8cf5de8d5fdd2">try_lock</a> (<a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1safe__byte__ranges.html#aa0050984d2b49b3679d429d57b021f46">entity_type</a> entity) noexcept</td></tr>
<tr class="memdesc:aac706e034e46da62f3b8cf5de8d5fdd2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to lock a single entity for exclusive or shared access.  <br /></td></tr>
<tr class="separator:aac706e034e46da62f3b8cf5de8d5fdd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:af358312530ca92b642350feb82f89ef4" id="r_af358312530ca92b642350feb82f89ef4"><td class="memItemLeft" align="right" valign="top">static result&lt; <a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1safe__byte__ranges.html">safe_byte_ranges</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1safe__byte__ranges.html#af358312530ca92b642350feb82f89ef4">fs_mutex_safe_byte_ranges</a> (const <a class="el" href="classllfio__v2__xxx_1_1path__handle.html">path_handle</a> &amp;base, <a class="el" href="classllfio__v2__xxx_1_1path__view.html">path_view</a> lockfile) noexcept</td></tr>
<tr class="memdesc:af358312530ca92b642350feb82f89ef4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialises a shared filing system mutex using the file at <em>lockfile</em>.  <br /></td></tr>
<tr class="separator:af358312530ca92b642350feb82f89ef4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a3dacd0c296173622d06295b0c71fb115" id="r_a3dacd0c296173622d06295b0c71fb115"><td class="memItemLeft" align="right" valign="top">virtual result&lt; void &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1safe__byte__ranges.html#a3dacd0c296173622d06295b0c71fb115">_lock</a> (<a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1shared__fs__mutex_1_1entities__guard.html">entities_guard</a> &amp;out, <a class="el" href="structllfio__v2__xxx_1_1deadline.html">deadline</a> d, bool spin_not_sleep) noexcept final</td></tr>
<tr class="separator:a3dacd0c296173622d06295b0c71fb115"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Safe many entity shared/exclusive file system based lock. </p>
<dl class="section see"><dt>See also</dt><dd>byte_ranges</dd></dl>
<p>POSIX requires that byte range locks have insane semantics, namely that:</p>
<ul>
<li>Any fd closed on an inode must release all byte range locks on that inode for all other fds.</li>
<li>Threads replace each other's locks.</li>
</ul>
<p>This makes the use of byte range locks in modern code highly problematic.</p>
<p>This implementation of <code>shared_fs_mutex</code> exclusively uses byte range locks on an inode for exclusion with other processes, but on POSIX only also layers on top:</p>
<ul>
<li>Keeps a process-wide store of reference counted fd's per lock in the process, thus preventing byte range locks ever being dropped unexpectedly.</li>
<li>A process-local thread aware layer, allowing byte range locks to be held by a thread and excluding other threads as well as processes.</li>
<li>A thread may add an additional exclusive or shared lock on top of its existing exclusive or shared lock, but unlocks always unlock the exclusive lock first. This choice of behaviour is to match Microsoft Windows' behaviour to aid writing portable code.</li>
</ul>
<p>On Microsoft Windows <code>safe_byte_ranges</code> is typedefed to <code>byte_ranges</code>, as the Windows byte range locking API already works as described above.</p>
<p>Benefits:</p>
<ul>
<li>Compatible with networked file systems, though be cautious with older NFS.</li>
<li>Linear complexity to number of concurrent users.</li>
<li>Exponential complexity to number of entities being concurrently locked.</li>
<li>Does a reasonable job of trying to sleep the thread if any of the entities are locked.</li>
<li>Sudden process exit with lock held is recovered from.</li>
<li>Sudden power loss during use is recovered from.</li>
<li>Safe for multithreaded usage.</li>
</ul>
<p>Caveats:</p><ul>
<li>When entities being locked is more than one, the algorithm places the contending lock at the front of the list during the randomisation after lock failure so we can sleep the thread until it becomes free. However, under heavy churn the thread will generally spin, consuming 100% CPU.</li>
<li>Byte range locks need to work properly on your system. Misconfiguring NFS or Samba to cause byte range locks to not work right will produce bad outcomes.</li>
<li>Unavoidably these locks will be a good bit slower than <code>byte_ranges</code>. </li>
</ul>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a3ddf148d1bf4ea4e8d8abeff6ec5660f" name="a3ddf148d1bf4ea4e8d8abeff6ec5660f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ddf148d1bf4ea4e8d8abeff6ec5660f">&#9670;&#160;</a></span>safe_byte_ranges()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">llfio_v2_xxx::algorithm::shared_fs_mutex::safe_byte_ranges::safe_byte_ranges </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1safe__byte__ranges.html">safe_byte_ranges</a> &amp;&amp;&#160;</td>
          <td class="paramname"><em>o</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Move constructor. </p>
<div class="fragment"><div class="line"><span class="lineno">  143</span>: _p(std::move(o._p)) {}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a3dacd0c296173622d06295b0c71fb115" name="a3dacd0c296173622d06295b0c71fb115"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3dacd0c296173622d06295b0c71fb115">&#9670;&#160;</a></span>_lock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual result&lt; void &gt; llfio_v2_xxx::algorithm::shared_fs_mutex::safe_byte_ranges::_lock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1shared__fs__mutex_1_1entities__guard.html">entities_guard</a> &amp;&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structllfio__v2__xxx_1_1deadline.html">deadline</a>&#160;</td>
          <td class="paramname"><em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>spin_not_sleep</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">final</span><span class="mlabel">protected</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1shared__fs__mutex.html">llfio_v2_xxx::algorithm::shared_fs_mutex::shared_fs_mutex</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  164</span>{ <span class="keywordflow">return</span> _p-&gt;_lock(out, d, spin_not_sleep); }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4cdf15b69bf6f375ec7083d639f76358" name="a4cdf15b69bf6f375ec7083d639f76358"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cdf15b69bf6f375ec7083d639f76358">&#9670;&#160;</a></span>entity_from_buffer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1safe__byte__ranges.html#aa0050984d2b49b3679d429d57b021f46">entity_type</a> llfio_v2_xxx::algorithm::shared_fs_mutex::shared_fs_mutex::entity_from_buffer </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>exclusive</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generates an entity id from a sequence of bytes. </p>
<div class="fragment"><div class="line"><span class="lineno">  116</span>      {</div>
<div class="line"><span class="lineno">  117</span>        <a class="code hl_typedef" href="namespacellfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex.html#a4d1eda01c8044f5366e6a49c1839db74">uint128</a> hash = QUICKCPPLIB_NAMESPACE::algorithm::hash::fast_hash::hash(buffer, bytes);</div>
<div class="line"><span class="lineno">  118</span>        <span class="keywordflow">return</span> {hash.as_longlongs[0] ^ hash.as_longlongs[1], <a class="code hl_enumvalue" href="namespacellfio__v2__xxx.html#ae79486289ff1386b26d1ce60bb797d33aa4293995cfbfa9ce60ce71ade2ff75f7">exclusive</a>};</div>
<div class="line"><span class="lineno">  119</span>      }</div>
<div class="ttc" id="anamespacellfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_html_a4d1eda01c8044f5366e6a49c1839db74"><div class="ttname"><a href="namespacellfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex.html#a4d1eda01c8044f5366e6a49c1839db74">llfio_v2_xxx::algorithm::shared_fs_mutex::uint128</a></div><div class="ttdeci">QUICKCPPLIB_NAMESPACE::integers128::uint128 uint128</div><div class="ttdoc">Unsigned 128 bit integer.</div><div class="ttdef"><b>Definition</b> base.hpp:45</div></div>
<div class="ttc" id="anamespacellfio__v2__xxx_html_ae79486289ff1386b26d1ce60bb797d33aa4293995cfbfa9ce60ce71ade2ff75f7"><div class="ttname"><a href="namespacellfio__v2__xxx.html#ae79486289ff1386b26d1ce60bb797d33aa4293995cfbfa9ce60ce71ade2ff75f7">llfio_v2_xxx::lock_kind::exclusive</a></div><div class="ttdeci">@ exclusive</div><div class="ttdoc">Exclude those requesting any kind of lock on the same inode.</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afb28aedaf5caa53e851165a4f1927207" name="afb28aedaf5caa53e851165a4f1927207"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb28aedaf5caa53e851165a4f1927207">&#9670;&#160;</a></span>entity_from_string()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1safe__byte__ranges.html#aa0050984d2b49b3679d429d57b021f46">entity_type</a> llfio_v2_xxx::algorithm::shared_fs_mutex::shared_fs_mutex::entity_from_string </td>
          <td>(</td>
          <td class="paramtype">const std::basic_string&lt; T &gt; &amp;&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>exclusive</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generates an entity id from a string. </p>
<div class="fragment"><div class="line"><span class="lineno">  122</span>      {</div>
<div class="line"><span class="lineno">  123</span>        <a class="code hl_typedef" href="namespacellfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex.html#a4d1eda01c8044f5366e6a49c1839db74">uint128</a> hash = QUICKCPPLIB_NAMESPACE::algorithm::hash::fast_hash::hash(str);</div>
<div class="line"><span class="lineno">  124</span>        <span class="keywordflow">return</span> {hash.as_longlongs[0] ^ hash.as_longlongs[1], <a class="code hl_enumvalue" href="namespacellfio__v2__xxx.html#ae79486289ff1386b26d1ce60bb797d33aa4293995cfbfa9ce60ce71ade2ff75f7">exclusive</a>};</div>
<div class="line"><span class="lineno">  125</span>      }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab33ccb32052633a55cb3bb5d1bbdf52b" name="ab33ccb32052633a55cb3bb5d1bbdf52b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab33ccb32052633a55cb3bb5d1bbdf52b">&#9670;&#160;</a></span>fill_random_entities()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void llfio_v2_xxx::algorithm::shared_fs_mutex::shared_fs_mutex::fill_random_entities </td>
          <td>(</td>
          <td class="paramtype">span&lt; <a class="el" href="structllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1shared__fs__mutex_1_1entity__type.html">entity_type</a> &gt;&#160;</td>
          <td class="paramname"><em>seq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>exclusive</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fills a sequence of entity ids with cryptographic randomness. Much faster than calling random_entity() individually. </p>
<div class="fragment"><div class="line"><span class="lineno">  135</span>      {</div>
<div class="line"><span class="lineno">  136</span>        <a class="code hl_function" href="namespacellfio__v2__xxx_1_1utils.html#ae61e2de30b06776a1c24643a1d1dc64e">utils::random_fill</a>(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span> *<span class="keyword">&gt;</span>(seq.data()), seq.size() * <span class="keyword">sizeof</span>(entity_type));</div>
<div class="line"><span class="lineno">  137</span>        <span class="keywordflow">for</span>(<span class="keyword">auto</span> &amp;i : seq)</div>
<div class="line"><span class="lineno">  138</span>        {</div>
<div class="line"><span class="lineno">  139</span>          i.exclusive = <a class="code hl_enumvalue" href="namespacellfio__v2__xxx.html#ae79486289ff1386b26d1ce60bb797d33aa4293995cfbfa9ce60ce71ade2ff75f7">exclusive</a>;  <span class="comment">// NOLINT</span></div>
<div class="line"><span class="lineno">  140</span>        }</div>
<div class="line"><span class="lineno">  141</span>      }</div>
<div class="ttc" id="anamespacellfio__v2__xxx_1_1utils_html_ae61e2de30b06776a1c24643a1d1dc64e"><div class="ttname"><a href="namespacellfio__v2__xxx_1_1utils.html#ae61e2de30b06776a1c24643a1d1dc64e">llfio_v2_xxx::utils::random_fill</a></div><div class="ttdeci">void random_fill(char *buffer, size_t bytes) noexcept</div><div class="ttdoc">Fills the buffer supplied with cryptographically strong randomness. Uses the OS kernel API.</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af358312530ca92b642350feb82f89ef4" name="af358312530ca92b642350feb82f89ef4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af358312530ca92b642350feb82f89ef4">&#9670;&#160;</a></span>fs_mutex_safe_byte_ranges()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static result&lt; <a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1safe__byte__ranges.html">safe_byte_ranges</a> &gt; llfio_v2_xxx::algorithm::shared_fs_mutex::safe_byte_ranges::fs_mutex_safe_byte_ranges </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classllfio__v2__xxx_1_1path__handle.html">path_handle</a> &amp;&#160;</td>
          <td class="paramname"><em>base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllfio__v2__xxx_1_1path__view.html">path_view</a>&#160;</td>
          <td class="paramname"><em>lockfile</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialises a shared filing system mutex using the file at <em>lockfile</em>. </p>
<div class="fragment"><div class="line"><span class="lineno">  158</span>      {</div>
<div class="line"><span class="lineno">  159</span>        OUTCOME_TRY(<span class="keyword">auto</span> &amp;&amp;ret, detail::inode_to_fs_mutex(base, lockfile));</div>
<div class="line"><span class="lineno">  160</span>        <span class="keywordflow">return</span> safe_byte_ranges(std::move(ret));</div>
<div class="line"><span class="lineno">  161</span>      }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8ad0c61b69f363813661dc1971a60dd2" name="a8ad0c61b69f363813661dc1971a60dd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ad0c61b69f363813661dc1971a60dd2">&#9670;&#160;</a></span>lock() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">result&lt; <a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1shared__fs__mutex_1_1entities__guard.html">entities_guard</a> &gt; llfio_v2_xxx::algorithm::shared_fs_mutex::shared_fs_mutex::lock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1shared__fs__mutex.html#aec91125605e5a8379b7616b7f90d1232">entities_type</a>&#160;</td>
          <td class="paramname"><em>entities</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structllfio__v2__xxx_1_1deadline.html">deadline</a>&#160;</td>
          <td class="paramname"><em>d</em> = <code><a class="el" href="structllfio__v2__xxx_1_1deadline.html">deadline</a>()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>spin_not_sleep</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Lock all of a sequence of entities for exclusive or shared access. </p>
<div class="fragment"><div class="line"><span class="lineno">  222</span>      {</div>
<div class="line"><span class="lineno">  223</span>        entities_guard ret(<span class="keyword">this</span>, entities);</div>
<div class="line"><span class="lineno">  224</span>        OUTCOME_TRYV(_lock(ret, d, spin_not_sleep));</div>
<div class="line"><span class="lineno">  225</span>        <span class="keywordflow">return</span> {std::move(ret)};</div>
<div class="line"><span class="lineno">  226</span>      }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac0c3cedcbcee27bcba4d161194b45354" name="ac0c3cedcbcee27bcba4d161194b45354"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0c3cedcbcee27bcba4d161194b45354">&#9670;&#160;</a></span>lock() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">result&lt; <a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1shared__fs__mutex_1_1entities__guard.html">entities_guard</a> &gt; llfio_v2_xxx::algorithm::shared_fs_mutex::shared_fs_mutex::lock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1shared__fs__mutex_1_1entity__type.html">entity_type</a>&#160;</td>
          <td class="paramname"><em>entity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structllfio__v2__xxx_1_1deadline.html">deadline</a>&#160;</td>
          <td class="paramname"><em>d</em> = <code><a class="el" href="structllfio__v2__xxx_1_1deadline.html">deadline</a>()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>spin_not_sleep</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Lock a single entity for exclusive or shared access. </p>
<div class="fragment"><div class="line"><span class="lineno">  229</span>      {</div>
<div class="line"><span class="lineno">  230</span>        entities_guard ret(<span class="keyword">this</span>, entity);</div>
<div class="line"><span class="lineno">  231</span>        OUTCOME_TRYV(_lock(ret, d, spin_not_sleep));</div>
<div class="line"><span class="lineno">  232</span>        <span class="keywordflow">return</span> {std::move(ret)};</div>
<div class="line"><span class="lineno">  233</span>      }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a581bfb3ba7cbd80ad7d50e2faa812d24" name="a581bfb3ba7cbd80ad7d50e2faa812d24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a581bfb3ba7cbd80ad7d50e2faa812d24">&#9670;&#160;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1safe__byte__ranges.html">safe_byte_ranges</a> &amp; llfio_v2_xxx::algorithm::shared_fs_mutex::safe_byte_ranges::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1safe__byte__ranges.html">safe_byte_ranges</a> &amp;&amp;&#160;</td>
          <td class="paramname"><em>o</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Move assign. </p>
<div class="fragment"><div class="line"><span class="lineno">  146</span>      {</div>
<div class="line"><span class="lineno">  147</span>        <span class="keywordflow">if</span>(<span class="keyword">this</span> == &amp;o)</div>
<div class="line"><span class="lineno">  148</span>        {</div>
<div class="line"><span class="lineno">  149</span>          <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><span class="lineno">  150</span>        }</div>
<div class="line"><span class="lineno">  151</span>        _p = std::move(o._p);</div>
<div class="line"><span class="lineno">  152</span>        <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><span class="lineno">  153</span>      }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8d62fe0c18bcfb1ade9ff9c7bb00e70b" name="a8d62fe0c18bcfb1ade9ff9c7bb00e70b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d62fe0c18bcfb1ade9ff9c7bb00e70b">&#9670;&#160;</a></span>random_entity()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1safe__byte__ranges.html#aa0050984d2b49b3679d429d57b021f46">entity_type</a> llfio_v2_xxx::algorithm::shared_fs_mutex::shared_fs_mutex::random_entity </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>exclusive</em> = <code>true</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generates a cryptographically random entity id. </p>
<div class="fragment"><div class="line"><span class="lineno">  128</span>      {</div>
<div class="line"><span class="lineno">  129</span>        <a class="code hl_typedef" href="structllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1shared__fs__mutex_1_1entity__type.html#adfb9e2612d4f570f0d3eb043bbb05d81">entity_type::value_type</a> v;</div>
<div class="line"><span class="lineno">  130</span>        <a class="code hl_function" href="namespacellfio__v2__xxx_1_1utils.html#ae61e2de30b06776a1c24643a1d1dc64e">utils::random_fill</a>(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span> *<span class="keyword">&gt;</span>(&amp;v), <span class="keyword">sizeof</span>(v));</div>
<div class="line"><span class="lineno">  131</span>        <span class="keywordflow">return</span> {v, <a class="code hl_enumvalue" href="namespacellfio__v2__xxx.html#ae79486289ff1386b26d1ce60bb797d33aa4293995cfbfa9ce60ce71ade2ff75f7">exclusive</a>};</div>
<div class="line"><span class="lineno">  132</span>      }</div>
<div class="ttc" id="astructllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1shared__fs__mutex_1_1entity__type_html_adfb9e2612d4f570f0d3eb043bbb05d81"><div class="ttname"><a href="structllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1shared__fs__mutex_1_1entity__type.html#adfb9e2612d4f570f0d3eb043bbb05d81">llfio_v2_xxx::algorithm::shared_fs_mutex::shared_fs_mutex::entity_type::value_type</a></div><div class="ttdeci">handle::extent_type value_type</div><div class="ttdoc">The type backing the value.</div><div class="ttdef"><b>Definition</b> base.hpp:63</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afdcd49112d1349c42b6e09aeb7ac2212" name="afdcd49112d1349c42b6e09aeb7ac2212"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdcd49112d1349c42b6e09aeb7ac2212">&#9670;&#160;</a></span>try_lock() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">result&lt; <a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1shared__fs__mutex_1_1entities__guard.html">entities_guard</a> &gt; llfio_v2_xxx::algorithm::shared_fs_mutex::shared_fs_mutex::try_lock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1shared__fs__mutex.html#aec91125605e5a8379b7616b7f90d1232">entities_type</a>&#160;</td>
          <td class="paramname"><em>entities</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Try to lock all of a sequence of entities for exclusive or shared access. </p>
<div class="fragment"><div class="line"><span class="lineno">  235</span>{ <span class="keywordflow">return</span> <a class="code hl_function" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1shared__fs__mutex.html#a8ad0c61b69f363813661dc1971a60dd2">lock</a>(entities, deadline(std::chrono::seconds(0))); }</div>
<div class="ttc" id="aclassllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1shared__fs__mutex_html_a8ad0c61b69f363813661dc1971a60dd2"><div class="ttname"><a href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1shared__fs__mutex.html#a8ad0c61b69f363813661dc1971a60dd2">llfio_v2_xxx::algorithm::shared_fs_mutex::shared_fs_mutex::lock</a></div><div class="ttdeci">result&lt; entities_guard &gt; lock(entities_type entities, deadline d=deadline(), bool spin_not_sleep=false) noexcept</div><div class="ttdoc">Lock all of a sequence of entities for exclusive or shared access.</div><div class="ttdef"><b>Definition</b> base.hpp:221</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aac706e034e46da62f3b8cf5de8d5fdd2" name="aac706e034e46da62f3b8cf5de8d5fdd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac706e034e46da62f3b8cf5de8d5fdd2">&#9670;&#160;</a></span>try_lock() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">result&lt; <a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1shared__fs__mutex_1_1entities__guard.html">entities_guard</a> &gt; llfio_v2_xxx::algorithm::shared_fs_mutex::shared_fs_mutex::try_lock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1shared__fs__mutex_1_1entity__type.html">entity_type</a>&#160;</td>
          <td class="paramname"><em>entity</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Try to lock a single entity for exclusive or shared access. </p>
<div class="fragment"><div class="line"><span class="lineno">  237</span>{ <span class="keywordflow">return</span> <a class="code hl_function" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1shared__fs__mutex.html#a8ad0c61b69f363813661dc1971a60dd2">lock</a>(entity, deadline(std::chrono::seconds(0))); }</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa22cd8a543e88b3af6915444828f31e2" name="aa22cd8a543e88b3af6915444828f31e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa22cd8a543e88b3af6915444828f31e2">&#9670;&#160;</a></span>unlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void llfio_v2_xxx::algorithm::shared_fs_mutex::safe_byte_ranges::unlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1safe__byte__ranges.html#a3a38be63dffa241d502f2a28ceb048ea">entities_type</a>&#160;</td>
          <td class="paramname"><em>entities</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long long&#160;</td>
          <td class="paramname"><em>hint</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">final</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unlock a previously locked sequence of entities. </p>

<p>Implements <a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1shared__fs__mutex.html#a645f3ecd3a841cb7311102dea4f36757">llfio_v2_xxx::algorithm::shared_fs_mutex::shared_fs_mutex</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  167</span>{ <span class="keywordflow">return</span> _p-&gt;unlock(entities, hint); }</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/llfio/v2.0/algorithm/shared_fs_mutex/<a class="el" href="safe__byte__ranges_8hpp.html">safe_byte_ranges.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacellfio__v2__xxx.html">llfio_v2_xxx</a></li><li class="navelem"><a class="el" href="namespacellfio__v2__xxx_1_1algorithm.html">algorithm</a></li><li class="navelem"><a class="el" href="namespacellfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex.html">shared_fs_mutex</a></li><li class="navelem"><a class="el" href="classllfio__v2__xxx_1_1algorithm_1_1shared__fs__mutex_1_1safe__byte__ranges.html">safe_byte_ranges</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
